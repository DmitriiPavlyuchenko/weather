(function(){"use strict";var e={610:function(e,t,n){var i=n(963),r=n(252);function s(e,t,n,i,s,a){var o=(0,r.up)("HomePage");return(0,r.wg)(),(0,r.j4)(o)}var a=n(577);const o={class:"weather"};function c(e,t,n,i,s,c){const h=(0,r.up)("DisplayApp"),u=(0,r.up)("MainApp");return(0,r.wg)(),(0,r.iD)("main",o,[(0,r._)("div",{class:(0,a.C_)([s.theme,"weather__container container"])},[(0,r.Wm)(h,{onChange:c.changeTheme},null,8,["onChange"]),(0,r.Wm)(u)],2)])}const h={class:"display"};function u(e,t,n,i,s,a){const o=(0,r.up)("SwitchesApp"),c=(0,r.up)("WeatherInfoApp"),u=(0,r.up)("CitiesInfoApp");return(0,r.wg)(),(0,r.iD)("section",h,[(0,r.Wm)(o,{onChange:a.changeTheme},null,8,["onChange"]),(0,r.Wm)(c),(0,r.Wm)(u)])}const l={class:"weather-info"},p={class:"weather-info__header"},m={class:"weather-info__degrees"},d=(0,r._)("span",{class:"weather-info__degree-sign"},"°с",-1),_=["src"],f={class:"weather-info__body"},g={class:"weather-info__date"},w={class:"weather-info__description"},v={class:"weather-info__day"},y=(0,r._)("span",{class:"weather-info__trait"},"|",-1),E={class:"weather-info__time"},S={class:"weather-info__footer"},T={class:"weather-info__forecast"},C=(0,r._)("i",{class:"weather-info__icon icon-wind"},null,-1),W=(0,r._)("span",{class:"weather-info__title"},"Wind",-1),I={class:"weather-info__magnitude"},A=(0,r._)("span",{class:"weather-info__trait"},"|",-1),D={class:"weather-info__forecast"},b=(0,r._)("i",{class:"weather-info__icon icon-hum"},null,-1),k=(0,r._)("span",{class:"weather-info__title"},"Hum",-1),L={class:"weather-info__magnitude"};function O(e,t,n,i,s,o){return(0,r.wg)(),(0,r.iD)("div",l,[(0,r._)("div",p,[(0,r._)("span",m,[(0,r.Uk)((0,a.zw)(e.temperature)+" ",1),d]),(0,r._)("img",{src:e.iconWeather,alt:"Weather",class:"weather-info__img"},null,8,_)]),(0,r._)("div",f,[(0,r._)("span",g,(0,a.zw)(e.convertDate),1),(0,r._)("div",w,[(0,r._)("span",v,(0,a.zw)(e.convertDay),1),y,(0,r._)("span",E,(0,a.zw)(e.convertTime),1)])]),(0,r._)("div",S,[(0,r._)("div",T,[C,W,(0,r._)("span",I,(0,a.zw)(e.wind)+"km/h",1)]),A,(0,r._)("div",D,[b,k,(0,r._)("span",L,(0,a.zw)(e.humidity)+"%",1)])])])}var $={SAINT_PETERSBURG:"Saint Petersburg",THEME:"theme",DEFAULT_THEME_VALUE:"purple"},F={CURRENT_CITY:"current_city",CITIES:"cities"},P=273.15,Z=function(e){var t=Math.ceil(e-P);return t},R=n(907),H=(0,r.aZ)({name:"WeatherInfoApp",data(){return{currentDate:new Date,temperature:"",iconWeather:""}},mounted(){this.updateDate()},computed:{...(0,R.Se)(["cityWeather"]),wind(){return this.cityWeather.wind?.speed},humidity(){return this.cityWeather.main?.humidity},convertDate(){return this.currentDate.toLocaleString().split(",").slice(0,1).join()},convertDay(){return this.currentDate.toDateString().split(" ").slice(0,1).join()},convertTime(){return this.currentDate.toLocaleString().split(",").slice(1).join()},unixTemperature(){return this.cityWeather.main?.temp},icon(){return this.cityWeather.weather?.[0].icon}},watch:{unixTemperature(e){this.temperature=Z(e)},icon(e){this.iconWeather=`http://openweathermap.org/img/wn/${e}@2x.png`}},methods:{updateDate(){setTimeout((()=>{this.currentDate=new Date,this.updateDate()}),1e3)}}}),M=n(744);const N=(0,M.Z)(H,[["render",O]]);var U=N;const z=(0,r._)("span",{class:"switcher-theme__purple switcher-options"},null,-1),x=(0,r._)("span",{class:"switcher-theme__blue switcher-options"},null,-1),j=(0,r._)("span",{class:"switcher-theme__red switcher-options"},null,-1),B=[z,x,j];function V(e,t,n,i,s,a){return(0,r.wg)(),(0,r.iD)("div",{class:"switcher-theme",onClick:t[0]||(t[0]=(...t)=>e.changeTheme&&e.changeTheme(...t))},B)}var Y=(0,r.aZ)({name:"SwitchesApp",emits:["change"],data(){return{theme:"purple",width:null}},mounted(){window.addEventListener("resize",this.handleResize),this.handleResize()},unmounted(){window.removeEventListener("resize",this.handleResize)},watch:{width(){const e=781,t=document.querySelector(".switcher-theme");if(this.width<e){const e=document.querySelector("#main");e.prepend(t)}else{const e=document.querySelector(".display");e.prepend(t)}}},methods:{changeTheme(e){const t=e.target.classList;t.contains("switcher-theme__purple")?this.theme="purple":t.contains("switcher-theme__blue")?this.theme="blue":t.contains("switcher-theme__red")&&(this.theme="red"),this.$emit("change",this.theme)},handleResize(){this.width=window.innerWidth}}});const q=(0,M.Z)(Y,[["render",V]]);var G=q;const X=["onClick"],J={class:"cities-info__degree"},K=(0,r._)("span",{class:"weather-info__degree-sign"},"°с",-1),Q=["alt","src"],ee={class:"cities-info__city"},te=["onClick"];function ne(e,t,n,s,o,c){return(0,r.wg)(),(0,r.iD)("ul",{style:(0,a.j5)([c.listPosition,c.listLength]),class:"cities-info"},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(c.getCities,(e=>((0,r.wg)(),(0,r.iD)("li",{key:e.name,ref_for:!0,ref:"city",class:"cities-info__card",onClick:t=>c.setActive(e)},[(0,r._)("span",J,[(0,r.Uk)((0,a.zw)((e.main.temp-273).toFixed()),1),K]),(0,r._)("img",{alt:e.name,src:"http://openweathermap.org/img/wn/"+e.weather[0].icon+"@2x.png",class:"cities-info__weather-icon"},null,8,Q),(0,r._)("span",ee,(0,a.zw)(e.name),1),(0,r._)("button",{class:"cities-info__delete",type:"button",onClick:(0,i.iM)((t=>c.deleteCity(e)),["stop"])}," x ",8,te)],8,X)))),128))],4)}var ie=function(e){try{return JSON.parse(localStorage.getItem(e)||"{}")}catch(t){return void console.log("Error getting data in LS")}},re=function(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(n){console.log("Error saving data in LS")}},se={type:"error",position:"top",duration:3e3,max:2},ae={name:"CitiesInfoApp",data(){return{activeCity:0,currentOffSet:0,touch:{isDragging:!1,startPos:0,currentTranslate:0,prevTranslate:0,currentIndex:0}}},mounted(){this.citiesInLocalStorage(),this.$el.addEventListener("dragstart",(e=>e.preventDefault())),this.$el.addEventListener("touchstart",(e=>this.touchStart(e))),this.$el.addEventListener("touchmove",(e=>this.touchMove(e))),this.$el.addEventListener("touchend",(e=>this.touchEnd(e))),this.$el.addEventListener("mousedown",(e=>this.touchStart(e))),this.$el.addEventListener("mouseup",(e=>this.touchEnd(e))),this.$el.addEventListener("mousemove",(e=>this.touchMove(e))),this.$el.addEventListener("mouseleave",(e=>this.touchEnd(e)))},beforeUnmount(){this.$el.removeEventListener("dragstart",(e=>e.preventDefault())),this.$el.removeEventListener("touchstart",(e=>this.touchStart(e))),this.$el.removeEventListener("touchmove",(e=>this.touchMove(e))),this.$el.removeEventListener("touchend",(e=>this.touchEnd(e))),this.$el.removeEventListener("mousedown",(e=>this.touchStart(e))),this.$el.removeEventListener("mouseup",(e=>this.touchEnd(e))),this.$el.removeEventListener("mousemove",(e=>this.touchMove(e))),this.$el.removeEventListener("mouseleave",(e=>this.touchEnd(e)))},computed:{...(0,R.Se)(["cities"]),listPosition(){return{transform:"translateX("+this.touch.currentTranslate+"px)"}},listLength(){const e=200,t=28;return{width:this.cities.length*e+(this.cities.length-1)*t+"px"}},getCities(){return this.cities}},methods:{...(0,R.OI)(["SET_CITIES","SET_CITY_WEATHER"]),...(0,R.nv)(["getCityWeather"]),getPositionX(e){return e.type.includes("mouse")?e.pageX:e.touches[0].clientX},touchStart(e){this.touch.startPos=this.getPositionX(e)-this.touch.currentTranslate,this.touch.isDragging=!0},touchMove(e){if(this.touch.isDragging){const t=this.getPositionX(e);this.touch.currentTranslate=t-this.touch.startPos}},touchEnd(){this.touch.isDragging=!1;const e=parseInt(this.listLength.width),t=0,n=228;this.touch.currentTranslate>t?this.touch.currentTranslate=t:this.touch.currentTranslate<-e+n&&(this.touch.currentTranslate=-e+this.cities.length+n)},citiesInLocalStorage(){const e=ie(F.CITIES);e&&this.$store.commit("SET_CITIES",e)},deleteCity(e){const t=this.cities,n=t.filter((t=>t!==e));this.$store.commit("SET_CITIES",n),re("cities",n),this.$toast.show(`City ${e.name} removed`,se)},setActive(e){this.$store.commit("SET_CITY_WEATHER",e)}}};const oe=(0,M.Z)(ae,[["render",ne]]);var ce=oe,he={components:{WeatherInfoApp:U,SwitchesApp:G,CitiesInfoApp:ce},name:"DisplayApp",emits:["change"],methods:{changeTheme(e){this.$emit("change",e)}}};const ue=(0,M.Z)(he,[["render",u]]);var le=ue;const pe={id:"main",class:"main"};function me(e,t,n,i,s,a){const o=(0,r.up)("HeaderApp"),c=(0,r.up)("DayPeriodApp"),h=(0,r.up)("InfoStringApp");return(0,r.wg)(),(0,r.iD)("section",pe,[(0,r.Wm)(o),(0,r.Wm)(c),(0,r.Wm)(h)])}var de=n.p+"img/search.54498039.svg";const _e={class:"header"},fe=(0,r._)("img",{alt:"Search",class:"header__search",height:"26",src:de,width:"25"},null,-1);function ge(e,t,n,s,a,o){const c=(0,r.up)("CityApp"),h=(0,r.up)("FormSearchApp"),u=(0,r.up)("ButtonBase");return(0,r.wg)(),(0,r.iD)("header",_e,[(0,r.Wm)(c,{isOpen:e.isFormOpen},null,8,["isOpen"]),(0,r.Wm)(h,{isOpen:e.isFormOpen,onCloseForm:e.closeForm},null,8,["isOpen","onCloseForm"]),(0,r.wy)((0,r.Wm)(u,{class:"header__form-open",type:"button",onClick:e.openForm},{default:(0,r.w5)((()=>[fe])),_:1},8,["onClick"]),[[i.F8,!e.isFormOpen]])])}const we=(0,r._)("img",{alt:"Search",class:"main__search",height:"26",src:de,width:"25"},null,-1);function ve(e,t,n,s,a,o){const c=(0,r.up)("InputBase"),h=(0,r.up)("ButtonBase");return(0,r.wy)(((0,r.wg)(),(0,r.iD)("form",{class:"search-form form",onClick:t[2]||(t[2]=(0,i.iM)((()=>{}),["stop"])),onSubmit:t[3]||(t[3]=(0,i.iM)((()=>{}),["prevent"]))},[(0,r.Wm)(c,{modelValue:e.cityName,"onUpdate:modelValue":t[0]||(t[0]=t=>e.cityName=t),modelModifiers:{capitalize:!0},class:"search-form__search-field",placeholder:"Enter city...",type:"text",onBlur:e.closeForm},null,8,["modelValue","onBlur"]),(0,r.Wm)(h,{disabled:e.isCityNameEmpty,class:"search-form__search",type:"submit",onClick:t[1]||(t[1]=t=>e.getCityWeather(e.cityName))},{default:(0,r.w5)((()=>[we])),_:1},8,["disabled"])],544)),[[i.F8,e.isOpen]])}var ye={GET_WEATHER_PATH:"https://api.openweathermap.org/data/2.5/weather",API_KEY:"0caaf31b54e8c519097a12c163376fba"},Ee={CODE_200:200},Se=(0,r.aZ)({name:"FormSearchApp",props:{isOpen:{type:Boolean,required:!0}},emits:["closeForm"],data(){return{cityName:""}},created(){this.isCityInLocalStorage()},computed:{isCityNameEmpty(){const e=1;return this.cityName.length<=e}},methods:{...(0,R.nv)(["getCityWeather"]),closeForm(){this.$emit("closeForm",!0)},async getCityWeather(e){try{const t=await this.$store.dispatch("getCityWeather",e);if(t.cod!==Ee.CODE_200)throw new Error(t.message);this.cityName="",this.closeForm()}catch(t){this.$toast.show(t,se)}},isCityInLocalStorage(){const e=ie(F.CURRENT_CITY),t=0===Object.keys(e).length;t?this.getCityWeather($.SAINT_PETERSBURG):this.getCityWeather(e)}}});const Te=(0,M.Z)(Se,[["render",ve]]);var Ce=Te;const We={class:"city"},Ie=(0,r._)("i",{class:"city__map icon-map"},null,-1),Ae={class:"city__name"};function De(e,t,n,s,o,c){return(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",We,[Ie,(0,r._)("span",Ae,(0,a.zw)(e.cityWeather.name),1)],512)),[[i.F8,!e.isOpen]])}var be=(0,r.aZ)({name:"CityApp",props:{isOpen:{type:Boolean,required:!0}},computed:{...(0,R.Se)(["cityWeather"])}});const ke=(0,M.Z)(be,[["render",De]]);var Le=ke,Oe=(0,r.aZ)({name:"HeaderApp",components:{FormSearchApp:Ce,CityApp:Le},data(){return{isFormOpen:!1}},methods:{openForm(){this.isFormOpen=!0},closeForm(){this.isFormOpen=!1}}});const $e=(0,M.Z)(Oe,[["render",ge]]);var Fe=$e;const Pe={class:"day-period"};function Ze(e,t,n,i,s,a){const o=(0,r.up)("ClockApp");return(0,r.wg)(),(0,r.iD)("div",Pe,[(0,r.Wm)(o,{time:e.sunrise,title:e.$options.SUNRISE},null,8,["time","title"]),(0,r.Wm)(o,{time:e.sunset,title:e.$options.SUNSET},null,8,["time","title"])])}const Re={class:"clock"},He={class:"clock__title"},Me={class:"clock__wrapper"},Ne=(0,r._)("div",{class:"clock__arrows"},[(0,r._)("span",{class:"clock__arrow clock__arrow_purple"}),(0,r._)("span",{class:"clock__arrow clock__arrow_white"}),(0,r._)("span",{class:"clock__arrow clock__arrow_brown"})],-1),Ue={class:"clock__timers"},ze={class:"clock__timer clock__timer_big"};function xe(e,t,n,i,s,o){return(0,r.wg)(),(0,r.iD)("div",Re,[(0,r._)("h2",He,(0,a.zw)(e.title),1),(0,r._)("div",Me,[Ne,(0,r._)("div",Ue,[(0,r._)("span",ze,(0,a.zw)(e.time),1)])])])}var je=(0,r.aZ)({name:"ClockApp",props:{title:{type:String,required:!0},time:{type:String,required:!0}}});const Be=(0,M.Z)(je,[["render",xe]]);var Ve=Be,Ye=function(e){var t=new Date(1e3*e),n=t.getHours(),i=t.getMinutes(),r=qe(n)+":"+qe(i);return r},qe=function(e){var t=10;if(e<t){var n="0"+e.toString();return n}return e},Ge={SUNRISE:"Sunrise",SUNSET:"Sunset"},Xe=(0,r.aZ)({SUNRISE:Ge.SUNRISE,SUNSET:Ge.SUNSET,components:{ClockApp:Ve},name:"DayPeriodApp",data(){return{sunrise:"",sunset:""}},computed:{...(0,R.Se)(["cityWeather"]),setSunriseWeather(){return this.cityWeather.sys?.sunrise},setSunsetWeather(){return this.cityWeather.sys?.sunset}},watch:{setSunriseWeather:{handler(e){const t=Ye(e);return this.sunrise=t}},setSunsetWeather:{handler(e){const t=Ye(e);return this.sunset=t}}}});const Je=(0,M.Z)(Xe,[["render",Ze]]);var Ke=Je;const Qe={class:"info-string"},et={class:"info-string__string"},tt=(0,r._)("span",{class:"info-string__info"},"i",-1);function nt(e,t,n,i,s,o){return(0,r.wg)(),(0,r.iD)("div",Qe,[(0,r._)("span",et,(0,a.zw)(e.description),1),tt])}var it=(0,r.aZ)({name:"InfoStringApp",computed:{...(0,R.Se)(["cityWeather"]),description(){return this.cityWeather.weather?.[0].description}}});const rt=(0,M.Z)(it,[["render",nt]]);var st=rt,at={components:{InfoStringApp:st,HeaderApp:Fe,DayPeriodApp:Ke},name:"MainApp"};const ot=(0,M.Z)(at,[["render",me]]);var ct=ot,ht={name:"HomePage",components:{MainApp:ct,DisplayApp:le},emits:["changeTheme"],data(){return{theme:""}},mounted(){this.isThemeInLocalStorage()},watch:{theme(e){re($.THEME,e)}},methods:{...(0,R.nv)(["getCityWeather"]),changeTheme(e){this.theme=e,re($.THEME,this.theme)},isThemeInLocalStorage(){const e=ie($.THEME),t=0===Object.keys(e).length;t?this.changeTheme($.DEFAULT_THEME_VALUE):this.changeTheme(e)}}};const ut=(0,M.Z)(ht,[["render",c]]);var lt=ut,pt=(0,r.aZ)({components:{HomePage:lt}});const mt=(0,M.Z)(pt,[["render",s]]);var dt=mt,_t=["value"];function ft(e,t,n,i,s,a){return(0,r.wg)(),(0,r.iD)("input",{value:e.modelValue,class:"input",onInput:t[0]||(t[0]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.emitValue&&e.emitValue.apply(e,t)})},null,40,_t)}var gt=(0,r.aZ)({name:"InputBase",props:{modelValue:{type:String,required:!0},modelModifiers:{default:function(){return{capitalize:""}}}},emits:["update:modelValue"],methods:{emitValue:function(e){var t=e.target.value,n=this.modelModifiers.capitalize;n&&(t=t.charAt(0).toUpperCase()+t.slice(1)),this.$emit("update:modelValue",t)}}});const wt=(0,M.Z)(gt,[["render",ft]]);var vt=wt;const yt={class:"button"};function Et(e,t,n,i,s,a){return(0,r.wg)(),(0,r.iD)("button",yt,[(0,r.WI)(e.$slots,"default")])}var St={name:"ButtonBase"};const Tt=(0,M.Z)(St,[["render",Et]]);var Ct=Tt,Wt=[vt,Ct],It=n(655),At=function(e){return(0,It.mG)(void 0,void 0,Promise,(function(){return(0,It.Jh)(this,(function(t){switch(t.label){case 0:return[4,fetch(e)];case 1:return[2,t.sent()]}}))}))},Dt=(0,R.MT)({state:function(){return{cityWeather:{},cities:[]}},getters:{cityWeather:function(e){return e.cityWeather},cities:function(e){return e.cities}},mutations:{SET_CITY_WEATHER:function(e,t){e.cityWeather=t},SET_CITY:function(e,t){e.cities=(0,It.ev)([t],e.cities,!0)},SET_CITIES:function(e,t){e.cities=t}},actions:{getCityWeather:function(e,t){return(0,It.mG)(this,void 0,Promise,(function(){var n,i,r,s,a,o,c;return(0,It.Jh)(this,(function(h){switch(h.label){case 0:return h.trys.push([0,4,,5]),[4,e.dispatch("isCityInStorage",t)];case 1:return n=h.sent(),i=ye.GET_WEATHER_PATH,r="".concat(i,"?q=").concat(t,"&appid=").concat(ye.API_KEY),[4,At(r)];case 2:return s=h.sent(),[4,s.json()];case 3:return a=h.sent(),s.status===Ee.CODE_200&&(o=a.name,n||(e.commit("SET_CITY",a),re(F.CURRENT_CITY,o),re(F.CITIES,e.getters.cities)),e.commit("SET_CITY_WEATHER",a)),[2,a];case 4:return c=h.sent(),[2,c];case 5:return[2]}}))}))},isCityInStorage:function(e,t){var n,i=ie("cities");return Array.isArray(i)&&(n=i.map((function(e){return e.name})).includes(t)),n}}}),bt=n(398),kt=(0,i.ri)(dt);Wt.forEach((function(e){kt.component(e.name,e)})),kt.use(Dt).use(bt.ZP,{position:"top"}).mount("#app")}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={exports:{}};return e[i](s,s.exports,n),s.exports}n.m=e,function(){var e=[];n.O=function(t,i,r,s){if(!i){var a=1/0;for(u=0;u<e.length;u++){i=e[u][0],r=e[u][1],s=e[u][2];for(var o=!0,c=0;c<i.length;c++)(!1&s||a>=s)&&Object.keys(n.O).every((function(e){return n.O[e](i[c])}))?i.splice(c--,1):(o=!1,s<a&&(a=s));if(o){e.splice(u--,1);var h=r();void 0!==h&&(t=h)}}return t}s=s||0;for(var u=e.length;u>0&&e[u-1][2]>s;u--)e[u]=e[u-1];e[u]=[i,r,s]}}(),function(){n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.p="/weather/"}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,i){var r,s,a=i[0],o=i[1],c=i[2],h=0;if(a.some((function(t){return 0!==e[t]}))){for(r in o)n.o(o,r)&&(n.m[r]=o[r]);if(c)var u=c(n)}for(t&&t(i);h<a.length;h++)s=a[h],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return n.O(u)},i=self["webpackChunkweather"]=self["webpackChunkweather"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=n.O(void 0,[998],(function(){return n(610)}));i=n.O(i)})();
//# sourceMappingURL=app.0e34ad04.js.map